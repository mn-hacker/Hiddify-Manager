root@opsopsops:/opt/hiddify-manager# bash <(curl -Ls https://raw.githubusercontent.com/mn-hacker/Hiddify-Manager/main/common/download.sh) beta
/dev/fd/63 input params are beta
Downloading 'beta'
Found latest pre-release: v11.0.23b
Your Linux distribution is Ubuntu 24.04



Using Python 3.13.11 environment at: /opt/hiddify-manager/.venv313






Traceback (most recent call last):
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
MySQLdb.OperationalError: (1054, "Unknown column 'user.notified_expiry' in 'SELECT'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/hiddifypanel/__main__.py", line 13, in <module>
    main()
    ~~~~^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/click/core.py", line 1157, in __call__
    return self.main(*args, **kwargs)
           ~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/click/core.py", line 1688, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/click/core.py", line 1434, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/click/decorators.py", line 33, in new_func
    return f(get_current_context(), *args, **kwargs)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/flask/cli.py", line 386, in decorator
    return ctx.invoke(f, *args, **kwargs)
           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/click/core.py", line 783, in invoke
    return __callback(*args, **kwargs)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/hiddifypanel/panel/cli.py", line 60, in all_configs
    print(json.dumps(hiddify.all_configs_for_cli(), indent=4))
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/hiddifypanel/panel/hiddify.py", line 345, in all_configs_for_cli
    valid_users = [u.to_dict(dump_id=True) for u in User.query.filter((User.usage_limit > User.current_usage)).all() if u.is_active]
                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/MySQLdb/cursors.py", line 179, in execute
    res = self._query(mogrified_query)
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/MySQLdb/cursors.py", line 330, in _query
    db.query(q)
    ~~~~~~~~^^^
  File "/opt/hiddify-manager/.venv313/lib/python3.13/site-packages/MySQLdb/connections.py", line 261, in query
    _mysql.connection.query(self, query)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (MySQLdb.OperationalError) (1054, "Unknown column 'user.notified_expiry' in 'SELECT'")
[SQL: SELECT user.id AS user_id, user.last_online AS user_last_online, user.usage_limit AS user_usage_limit, user.package_days AS user_package_days, user.mode AS user_mode, user.monthly AS user_monthly, user.start_date AS user_start_date, user.current_usage AS user_current_usage, user.last_reset_time AS user_last_reset_time, user.added_by AS user_added_by, user.max_ips AS user_max_ips, user.enable AS user_enable, user.ed25519_private_key AS user_ed25519_private_key, user.ed25519_public_key AS user_ed25519_public_key, user.wg_pk AS user_wg_pk, user.wg_pub AS user_wg_pub, user.wg_psk AS user_wg_psk, user.notified_expiry AS user_notified_expiry, user.notified_usage_80 AS user_notified_usage_80, user.notified_finished AS user_notified_finished, user.uuid AS user_uuid, user.name AS user_name, user.username AS user_username, user.password AS user_password, user.comment AS user_comment, user.telegram_id AS user_telegram_id, user.lang AS user_lang
FROM user
WHERE user.usage_limit > user.current_usage]
(Background on this error at: https://sqlalche.me/e/20/e3q8)



Error: Key not found: warp_mode

----------------------------------------------------------------
- Warp Status:
  - Profile:
        2025/12/31 23:44:53 Using config file: wgcf-account.toml
        2025/12/31 23:44:54 Printing account details:

        ================================================================
        Account
        ================================================================
        Id           : ff65b96b-cfe6-404f-9e91-3bb97a11cd38
        Account type : free
        Created      : 2025-12-31T20:14:38.61952Z
        Updated      : 2025-12-31T20:14:38.61952Z
        Premium data : 0 B
        Quota        : 0 B
        Role         : child

        ================================================================
        Devices
        ================================================================
        Id        : 7d1a7fe3-55d3-4cd5-b3b2-35d3d112fb42 (current)
        Type      : Android
        Model     : hiddify
        Name      : opsopsops
        Active    : true
        Created   : 2025-12-31T20:14:38.32795Z
        Activated : 2025-12-31T20:14:38.32795Z
        Role      : parent
  - Network:
        "country"      : "Finland",
        "city"         : "Helsinki",
        "org"          : "Cloudflare WARP",
        "query"        : "104.28.254.15"
----------------------------------------------------------------
- Global IP:
Error: Key not found: core_type
----------------------------------------------------------------
- Services Status:
Error: Key not found: warp_mode
    hiddify-cli                                        activating
    hiddify-ss-faketls                                     active
    hiddify-redis                                          active
    hiddify-singbox                                        active
    hiddify-panel                                          active
    hiddify-haproxy                                    activating
    hiddify-ssh-liberty-bridge                             active
    hiddify-nginx                                          active
    hiddify-xray                                       activating
    hiddify-panel-background-tasks                         active
    wg-quick@warp                                          active